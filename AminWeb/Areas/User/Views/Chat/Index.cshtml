
@{
    ViewBag.Title = "گفت و گو";
    ViewBag.Content = "بحث و گفت و گو با مربیان خود";
    Layout = "~/Areas/User/Views/Shared/_Layout.cshtml";
}

<div class="chat mat uk-padding uk-box-shadow-small column uk-margin-xlarge-bottom">
    <h3 class="uk-margin-remove-top">
        گفت و گو
    </h3>

    <div class="form-group">
        <label for="Contacts">مخاطبان</label>
        <div class="row-reverse">
            @Html.Action("Chats")
        </div>
    </div>
    <div id="listMessage">

    </div>

    <!--<div class="chat-room uk-margin-top uk-box-shadow-hover-large">
        <ul class="uk-padding-remove" id="listMessage">
        </ul>
    </div>

    <div class="row-reverse uk-margin-top">

        <div class="row uk-width-1-1">
            <textarea type="text" name="Message" id="messageTextAreaa" class="uk-width-1-1" placeholder="..."></textarea>
            <button class="btn-pill-primary uk-margin-left uk-margin-auto-bottom" onclick="sendMessage()">-->
    @*<span uk-icon="icon:send;ratio:1.2"></span>*@
    <!--فرستادن
            </button>
        </div>
    </div>-->
</div>

@section Scripts{
    <script>

        $('#mySelect').on('change', function () {
            var id = $(this).val();
            $.get('/User/Chat/ViewChat/' + id, function (result) {
                $('#listMessage').html(result);
            });
        });
        function sendMessage(id) {
            if ($('#messageTextAreaa').val() == "") {
                UIkit.notification("متن خالیست");
                return false;
            }
            var message = $('#messageTextAreaa').val();
            $.ajax({
                url: '/User/Chat/SendMessage',
                data: { id: id, message: message },
            }).done(function (result) {
                $('#messageTextAreaa').val("");
                $('#listMessage').html(result);
            });
        }

    </script>
}
